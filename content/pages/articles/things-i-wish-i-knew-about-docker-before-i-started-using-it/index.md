---
title: –ß—Ç–æ —è —Ö–æ—Ç–µ–ª–∞ –±—ã –∑–Ω–∞—Ç—å –æ –î–æ–∫–µ—Ä–µ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –Ω–∞—á–∞–ª–∞ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
date: Last Modified
permalink: articles/things-i-wish-i-knew-about-docker-before-i-started-using-it.html
eleventyNavigation:
  parent: Articles
  order: 1
  title: –ß—Ç–æ —è —Ö–æ—Ç–µ–ª–∞ –±—ã –∑–Ω–∞—Ç—å –æ –î–æ–∫–µ—Ä–µ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –Ω–∞—á–∞–ª–∞ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
tags:
  - Docker
  - Docker Compose
  - Docker Container
  - Docker Image
  - Dockerfiles
---

–≠—Ç–æ –ø–µ—Ä–µ–≤–æ–¥ [—Å—Ç–∞—Ç—å–∏ –∏–∑ –±–ª–æ–≥–∞ TWG](https://twg.io/blog/things-i-wish-i-knew-about-docker-before-i-started-using-it/) –∏–Ω–∂–µ–Ω–µ—Ä–∞-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ –ù–∏–∫–æ–ª—å –ß–∞–Ω–≥, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ–Ω–∞ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ —Å–≤–æ–∏—Ö –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è—Ö –æ –î–æ–∫–µ—Ä–µ, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –ø–æ–∑–≤–æ–ª—è—é—â–µ–º —É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –ª—é–±–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –≤–∏–¥–µ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –≥–¥–µ —É–≥–æ–¥–Ω–æ ‚Äî –æ—Ç –Ω–æ—É—Ç–±—É–∫–∞ –¥–æ –ª—é–±–æ–≥–æ –∫—Ä—É–ø–Ω–æ–≥–æ –æ–±–ª–∞—á–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

![Docker ideas](/content/images/docker-1.png)

–ö–æ–≥–¥–∞ —è —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–ª–∞ –∏–∑—É—á–∞—Ç—å –î–æ–∫–µ—Ä, —è —Å–º–æ—Ç—Ä–µ–ª–∞ –µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, —á–∏—Ç–∞–ª–∞ —Å—Ç–∞—Ç—å–∏ –≤ –±–ª–æ–≥–∞—Ö, –ª–∏—Å—Ç–∞–ª–∞ –∫–Ω–∏–≥–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —á—É–∂–∏–µ –ø—É–±–ª–∏—á–Ω—ã–µ git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏. –í—Å–µ —ç—Ç–∏ —Ä–µ—Å—É—Ä—Å—ã –Ω–µ –æ—á–µ–Ω—å-—Ç–æ –º–Ω–µ –ø–æ–º–æ–≥–ª–∏.

–ù–∞ —Å–∞–π—Ç–µ Stack Overflow —è –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞, —á—Ç–æ –º–Ω–æ–≥–∏–µ –ª—é–¥–∏ –∑–∞–¥–∞–≤–∞–ª–∏ —Ç–µ –∂–µ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ –∏ —è:

1. –ß—Ç–æ —Ç–∞–∫–æ–µ `WORKDIR`, –≥–¥–µ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ?
1. –ü–æ—á–µ–º—É –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —è –º–µ–Ω—è—é `Dockerfile`? (–ö–∞–∫ –≤ –î–æ–∫–µ—Ä–µ —É—Å—Ç—Ä–æ–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ?)
1. –ß—Ç–æ —Ç–∞–∫–æ–µ *Docker compose*, –∏ –∑–∞—á–µ–º –º–Ω–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?
1. –ö–∞–∫ –≤–æ–π—Ç–∏ –≤ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ ssh?
1. –ö—É–¥–∞ –ø–æ–º–µ—Å—Ç–∏—Ç—å –∫–æ–¥ –∏ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤–Ω–µ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞? –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –º–Ω–µ –Ω—É–∂–Ω–æ —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö? (–ø–æ–¥—Å–∫–∞–∑–∫–∞: *Docker volumes*)

## –ß—Ç–æ —Ç–∞–∫–æ–µ `WORKDIR`, –≥–¥–µ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏ –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ?

–í–æ—Ç –ø—Ä–∏–º–µ—Ä `Dockerfile`:

```
FROM node:alpine
WORKDIR /usr/src/app
```

–ó–¥–µ—Å—å —è –∏—Å–ø–æ–ª—å–∑—É—é `node:alpine` –∫–∞–∫ –æ—Å–Ω–æ–≤—É –¥–ª—è —Å–≤–æ–µ–≥–æ –æ–±—Ä–∞–∑–∞ (—ç—Ç–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –æ–±—Ä–∞–∑ –∏–∑-–∑–∞ —Å–≤–æ–µ–≥–æ –º–∞–ª–µ–Ω—å–∫–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞).

–î–∞–ª–µ–µ —è —É–∫–∞–∑—ã–≤–∞—é `/usr/src/app` –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–∂–µ –ø–æ–º–µ—â—É —Å—é–¥–∞.

–¢–∞–∫ –≤–æ—Ç, `WORKDIR` —ç—Ç–æ –≤–∞—à–∞ —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è. –û–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –î–æ–∫–µ—Ä —Å–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É `/usr`. –¢–∞–∫ —á—Ç–æ –ø–∞–ø–∫–∞ `/usr` –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –æ–±—Ä–∞–∑–µ.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –≤–∞—à–∞ —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –Ω–∞—Ö–æ–¥–∏–ª–∞—Å—å –≤ —Å–æ–≤—Å–µ–º –¥—Ä—É–≥–æ–π –ø–∞–ø–∫–µ, –≤–∞–º –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å —ç—Ç—É –ø–∞–ø–∫—É:

```
FROM node:alpine
MKDIR app
WORKDIR app
```

–ß–∞—â–µ –≤—Å–µ–≥–æ `WORKDIR` –±—É–¥–µ—Ç –∏–¥—Ç–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã `FROM` –≤ –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–∞—Ö. –≠—Ç–æ –ø–æ—Ç–æ–º—É —á—Ç–æ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ, —Ç–∞–∫–∏–µ –∫–∞–∫ `RUN`, `CMD`, `ENTRYPOINT`, `COPY` –∏–ª–∏ `ADD`, –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —É–∂–µ –≤–Ω—É—Ç—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤ `WORKDIR`.

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ `RUN`, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ –∫–æ–º–∞–Ω–¥–æ–π `WORKDIR`, ‚Äî —ç—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª—é–±—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ö–æ—Ç–µ–ª–∏ –±—ã –≤–∏–¥–µ—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –≤ —Å–≤–æ–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤ `WORKDIR`.

## –ü–æ—á–µ–º—É –º–æ–π –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —è –º–µ–Ω—è—é `Dockerfile`? (–ö–∞–∫ –≤ –î–æ–∫–µ—Ä–µ —É—Å—Ç—Ä–æ–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ?)

–ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ (—Å—Ç—Ä–æ—á–∫–∞) –≤ `Dockerfile` –∫–µ—à–∏—Ä—É–µ—Ç—Å—è. –í–æ–æ–±—â–µ, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–µ–Ω–æ –Ω–µ–ø—Ä–æ—Å—Ç–æ, –Ω–æ –µ—Å–ª–∏ –≤—ã –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ª–æ–≥–∏ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, –≤—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–µ:

```
Step 2 : RUN npm install -g nodemon
 ‚Äî -> Using cache
 ‚Äî -> <some hash goes here>
Step 3 : WORKDIR /app
 ‚Äî -> Using cache
 ‚Äî -> <some hash goes here>
Step 4 : COPY package.json .
 ‚Äî -> <some hash goes here>
Removing intermediate container <some hash goes here>
Step 7 : RUN npm install
 ‚Äî -> Running in <some hash goes here>
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –≤–æ—Ç —Ç–∞–∫–∏–µ —Å—Ç—Ä–æ—á–∫–∏:

```
‚Äî -> Using cache
```

–ï—Å–ª–∏ –≤–∞—à –∫–æ–¥ –Ω–µ –º–µ–Ω—è–ª—Å—è —Å —Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ –≤—ã –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ –∏–∑–º–µ–Ω–∏–ª–∏ —Å–≤–æ–π `Dockerfile`, –∏ –î–æ–∫–µ—Ä –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, —ç—Ç–æ —Ö–æ—Ä–æ—à–æ. –ù–æ —á—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —Ñ–∞–π–ª—ã –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–∏–ª–∏—Å—å? –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `package.json`, –∏–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏ –∫–æ–¥ –≤ –ª—é–±–æ–º –∏–∑ —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ä–∞–Ω–µ–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –∏–ª–∏ –¥–æ–±–∞–≤–∏–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã `COPY` –∏–ª–∏ `ADD`.

–°–º—ã—Å–ª –∫–µ—à–∞ –≤ —Ç–æ–º, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–∞—à–µ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ (—Å–º. `FROM`), –ø–æ—Å–∫–æ–ª—å–∫—É –∑–∞–≥—Ä—É–∑–∫–∞ —ç—Ç–æ–≥–æ –æ–±—Ä–∞–∑–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∞ —Å–∞–º–∏ –æ–±—Ä–∞–∑—ã –º–µ–Ω—è—é—Ç—Å—è –æ—á–µ–Ω—å —Ä–µ–¥–∫–æ. –û–¥–Ω–∞–∫–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –¥–æ—Å—Ç–∞–≤–∏—Ç—å –º–Ω–æ–≥–æ –±–æ–ª–∏ –ø–æ–∫–∞ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

–ï—Å–ª–∏ –≤—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –Ω–µ –±—É–¥–µ—Ç–µ –º–µ–Ω—è—Ç—å —Å–≤–æ–π `Dockerfile` –≤ –±–ª–∏–∂–∞–π—à–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤, –º–æ–∂–Ω–æ —Å–º–µ–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è, –∏–Ω–∞—á–µ –≤—ã —Å—Ç–æ–ª–∫–Ω–µ—Ç–µ—Å—å —Å –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–º–∏, –æ—Ç–Ω–∏–º–∞—é—â–∏–º–∏ –≤—Ä–µ–º—è —Å—é—Ä–ø—Ä–∏–∑–∞–º–∏, –∫–æ–≥–¥–∞ –∏–∑–º–µ–Ω–∏—Ç–µ —Å–≤–æ–π –∫–æ–¥, –∞ –≤ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è.

–ò–∑-–∑–∞ —Ç–æ–≥–æ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –î–æ–∫–µ—Ä–µ, –≤—ã —á–∞—Å—Ç–µ–Ω—å–∫–æ –º–æ–∂–µ—Ç–µ –æ–∫–∞–∑–∞—Ç—å—Å—è –≤ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –Ω–µ —É–≤–∏–¥–∏—Ç–µ –Ω–∏–∫–∞–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ `Dockerfile` –∏ `docker-compose.yml`, –∏–ª–∏ –∫–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –∫–æ–º–∞–Ω–¥, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã—Ö –Ω–∏–∂–µ.

- –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ —É–¥–∞–ª—è—Ç—å –¥–æ–∫–µ—Ä-–æ–±—Ä–∞–∑—ã):
  `$ docker rm $(docker ps -aq)`
- –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–æ–∫–µ—Ä-–æ–±—Ä–∞–∑—ã:
  `$ docker rmi $(docker images -q)`

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≤—ã —É–Ω–∏—á—Ç–æ–∂–∏—Ç–µ –≤—Å–µ –¥–æ–∫–µ—Ä-–æ–±—Ä–∞–∑—ã –∏ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ —Å–≤–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è —Å–æ–±—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ –æ–±—Ä–∞–∑—ã –∏ –ø–æ–¥–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —á—Ç–æ —Å–¥–µ–ª–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å–±–æ—Ä–∫—É –º–µ–¥–ª–µ–Ω–Ω–æ–π (–ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–µ—à–∞). –û–¥–Ω–∞–∫–æ —ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º —É–≤–∏–¥–µ—Ç—å —Å–≤–æ–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

–ï—â–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ñ–ª–∞–≥ `--no-cache` –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –¥–æ–∫–µ—Ä-–æ–±—Ä–∞–∑–∞.

–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∞–ª–∏–∞—Å—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –¥–æ–∫–µ—Ä-–∫–æ–º–º–∞–Ω–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏:

```
alias dockerrm=‚Äôdocker rm $(docker ps -aq)‚Äô

alias dockerrmi=‚Äôdocker rmi $(docker images -q)‚Äô
```

## –ß—Ç–æ —Ç–∞–∫–æ–µ *Docker compose*, –∏ –∑–∞—á–µ–º –º–Ω–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

![Docker compose](/content/images/docker-2.png)

*`Dockerfile` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å `docker-compose.yml` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞.*


***Docker compose*** —É–¥–æ–±–µ–Ω —Ç–µ–º, —á—Ç–æ:

- ***Docker compose*** –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Äî —á—Ç–æ –∑–∞—á–∞—Å—Ç—É—é –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. –£ –≤–∞—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è API, –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, —Ç—Ä–µ—Ç–∏–π ‚Äî –¥–ª—è –∫–µ—à–∞ Redis.
- –ë–ª–∞–≥–æ–¥–∞—Ä—è ***Docker compose*** –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `docker-compose up`, –∞ –∑–∞—Ç–µ–º –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏—Ö –≤—ã–∑–≤–∞–≤ `docker-compose down`.
- ***Docker compose*** –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–ø—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–º–∞–Ω–¥–µ `docker run` –∏–∑ docker cli, –≤ —Ñ–∞–π–ª `docker-compose.yml`.

–¢—Ä–µ—Ç–∏–π –ø—É–Ω–∫—Ç, –Ω–∞ –º–æ–π –≤–∑–≥–ª—è–¥, —Å–∞–º—ã–π –ø–æ–ª–µ–∑–Ω—ã–π. –£–∂–∞—Å–Ω–æ –Ω–µ —É–¥–æ–±–Ω–æ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –∫—É—á—É –æ–ø—Ü–∏–π docker cli, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –±—É–¥–µ—Ç–µ –ª–∏–±–æ –ø–µ—Ä–µ–ø–µ—á–∞—Ç—ã–≤–∞—Ç—å, –ª–∏–±–æ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—Å—Ç–∞–≤–ª—è—Ç—å —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å –∏—Ö –≤ —Ñ–∞–π–ª `docker-compose.yml`, –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, —è –∑–∞–º–µ—Ç–∏–ª–∞, —á—Ç–æ –æ–ø—Ü–∏–∏ docker cli –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –º–µ–Ω—è—é—Ç—Å—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –î–æ–∫–µ—Ä–∞, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ —Ñ–∞–π–ª–µ `docker-compose.yml`. –ï—Å–ª–∏ –≤—ã –Ω–∞—Ç–∫–Ω–µ—Ç–µ—Å—å –Ω–∞ —Å—Ç–∞—Ä—É—é —Å—Ç–∞—Ç—å—é –ø–æ –î–æ–∫–µ—Ä—É, —Ç–æ, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Ç–∞–º –±—É–¥—É—Ç –ø—Ä–∏–≤–µ–¥–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–ª–∞–≥–∏ –¥–ª—è docker cli.

***Docker compose*** –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–µ–Ω, –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –¥–µ–≤–µ–ª–æ–ø-–æ–±—Ä–∞–∑, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–æ–±—Ä–∞–∑, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –≤—ã–∫–ª–∞–¥—ã–≤–∞–µ—Ç–µ –¥–ª—è –æ–±—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É—è —Ñ–ª–∞–≥ `-f` –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ `docker compose` —Ä–∞–∑–Ω—ã–µ `docker-compose.yml` —Ñ–∞–π–ª—ã. –í —Å–ª—É—á–∞–µ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ–±—Ä–∞–∑–æ–≤ –Ω–∞ –¥–µ–≤–µ–ª–æ–ø –∏ –ø—Ä–æ–¥–∞–∫—à–µ–Ω, –≤–∞—à–∏ –∫–æ–º–∞–Ω–¥—ã –±—É–¥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```
$ docker-compose -f docker-compose.dev.yml up
$ docker-compose -f docker-compose.prod.yml up
```

–¢–∞–∫ —è –º–æ–≥—É —É–∫–∞–∑–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–µ:

```
services:
  <name of my service, like 'server'>:
  build:
  context: .
  dockerfile: Dockerfile.dev
```

–í –¥–æ–±–∞–≤–æ–∫, –µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Docker compose, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑ –±–µ–∑ –∫–µ—à–∞:

```
$ docker-compose build ‚Äî no-cache
```

## –ö–∞–∫ –≤–æ–π—Ç–∏ –≤ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ ssh?

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞—è –¥–æ–∫–µ—Ä-–æ–±—Ä–∞–∑ –≤–∞–º –∏–Ω–æ–≥–¥–∞ –ø—Ä–∏–¥–µ—Ç—Å—è –∑–∞—Ö–æ–¥–∏—Ç—å –ø–æ ssh –≤ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —á—Ç–æ —Ç–∞–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ (—Å–º. —Å—Ç—Ä–æ–∫—É `FROM` –≤ –≤–∞—à–µ–º –¥–æ–∫–µ—Ä—Ñ–∞–π–ª–µ), —É –≤–∞—Å –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω bash. –ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç bash, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π –¥–æ–±—Ä—ã–π sh. –° –ø–æ–º–æ—â—å—é shell –≤—ã –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É, –ø–µ—Ä–µ—á–∏—Å–ª—è—Ç—å —Ñ–∞–π–ª—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ñ–∞–π–ª—ã —Å –ø–æ–º–æ—â—å—é `cat`.

–í–æ—Ç —Ç–∞–∫ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```
$ docker ps
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–≤–µ–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∏—Ö id, –∏ —Å—Ç–∞—Ç—É—Å—ã.

–ê –≤–æ—Ç —Ç–∞–∫ –º–æ–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```
$ docker exec -it <container_id> sh
```

–í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–µ–Ω bash, –≤—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—ã–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```
$ docker exec -it <container_id> /bin/bash
```

–° –ø–æ–º–æ—â—å—é docker compose –≤—ã –º–æ–∂–µ—Ç–µ –≤–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø–æ–º–æ—â—å—é ssh:

```
$ docker-compose exec <container_id> sh
```

## –ö—É–¥–∞ –ø–æ–º–µ—Å—Ç–∏—Ç—å –∫–æ–¥ –∏ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤–Ω–µ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞? –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –º–Ω–µ –Ω—É–∂–Ω–æ —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö?

–ü–æ–¥—Å–∫–∞–∑–∫–∞: ***Docker volumes***.

–î–æ–∫–µ—Ä –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ ("—á–µ—Ä—Ç–µ–∂–µ–π" –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ) –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (—ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –æ–±—Ä–∞–∑–æ–≤). –í—Å–µ, —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –Ω–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã ‚Äî –Ω–µ –ª—É—á—à–µ–µ –º–µ—Å—Ç–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –í—ã —Å—Ç–æ–ª–∫–Ω–µ—Ç–µ—Å—å —Å —ç—Ç–∏–º, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —É—Ä–æ–∫–∏ –ø–æ –î–æ–∫–µ—Ä—É, –∏ –∑–∞–º–µ—Ç–∏—Ç–µ, —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å —Å–≤–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –º–µ–Ω—è–µ—Ç–µ –∫–æ–¥.

–î–ª—è –∫–æ–¥–∞ –∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –∏–∑–º–µ–Ω—è—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é `VOLUMES`. –î—É–º–∞–π—Ç–µ –æ ***volume***, –∫–∞–∫ –æ –ø–∞–ø–∫–µ, –∫–æ—Ç–æ—Ä—É—é –≤—ã –º–æ–Ω—Ç–∏—Ä—É–µ—Ç–µ –≤ —Ä–∞–±–æ—á—É—é –æ–±–ª–∞—Å—Ç—å `WORKDIR` –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

![Docker volumes](/content/images/docker-3.png)

****Volumes*** –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤–Ω–µ –¥–æ–∫–µ—Ä-–æ–±—Ä–∞–∑–∞. –û–Ω–∏ —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è –∏–∑–º–µ–Ω—è–µ–º—ã—Ö –≤–µ—â–µ–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –¥–∞–Ω–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.*

–ù—É –∞ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å ***volume***, —ç—Ç–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è ***docker compose***. –¢–∏–ø–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–∫ ***volume*** –≤ —Ñ–∞–π–ª–µ `docker-compose.yml` –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```
volumes:
 ‚Äî '.:/src/app'
 ‚Äî /src/app/node_modules
```

–û–ø–∏—Å–∞–Ω–Ω–∞—è –≤—ã—à–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É –º–µ–Ω—è –µ—Å—Ç—å –ø–∞–∫–∞ `/src/app` –≤ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∫–æ—Ç–æ—Ä—É—é —è —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–ª–∞ –≤ —Å–≤–æ–µ–º `Dockerfile`:

```
WORKDIR /src/app
RUN npm install
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –¥–≤–æ–µ—Ç–æ—á–∏–µ `:`. –≠—Ç–æ –≤–∞–∂–Ω–æ. –°–ª–µ–≤–∞ –æ—Ç –¥–≤–æ–µ—Ç–æ—á–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–∞—à–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ –ø–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–º—É –ø—É—Ç–∏. –°–ø—Ä–∞–≤–∞ ‚Äî –ø–∞–ø–∫–∞ –≤ –≤–∞—à–µ–º –¥–æ–∫–µ—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —ç—Ç–æ –±—É–¥–µ—Ç `WORKDIR`).

–¢–∞–∫–∂–µ –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —É –≤–∞—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ ***volumes***, –∏ –µ—Å–ª–∏ –≤—ã –Ω–µ –≤—Å—Ç–∞–≤–∏—Ç–µ –¥–≤–æ–µ—Ç–æ—á–∏–µ `:`, —Ç–æ –î–æ–∫–µ—Ä –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —ç—Ç—É –ø–∞–ø–∫—É –≤ `WORKDIR` (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ `/src/app/node_modules`) –∫–∞–∫ —á–∞—Å—Ç—å –≤–∞—à–µ–≥–æ ***volume***.

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç–µ Node –∏ npm, —Ç–æ —Å—Ç—Ä–æ–∫–∞ –±–µ–∑ –¥–≤–æ–µ—Ç–æ—á–∏—è (`/src/app/node_modules`) –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤–∞–º, —á—Ç–æ–±—ã –≤–∞—à –∫–æ–¥ –∏ `node_modules` –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ –æ–¥–Ω–æ–º `WORKDIR`. ***Volumes*** –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Å–∫—Ä—ã–≤–∞—é—Ç —Ç–æ, —á—Ç–æ –±—ã–ª–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ `RUN` –≤ –≤–∞—à `WORKDIR` –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ `node_modules` —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Ç–∞–∫–∂–µ —É—Å–∫–æ—Ä—è–µ—Ç –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ—Ç —Å–ª–æ–π (`RUN npm install`) –∫–µ—à–∏—Ä—É–µ—Ç—Å—è.

–î–ª—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ `PostgreSQL`, —á–∞—Å—Ç–æ —Ç—Ä–µ–±—É—é—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –î–æ–∫–µ—Ä–∞. –í –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ –º—ã –¥–∞–∂–µ –Ω–µ –±—É–¥–µ–º —É–∫–∞–∑—ã–≤–∞—Ç—å `Dockerfile`, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –º—ã –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–¥—Ç–º —ç–∫–∑–µ–º–ø–ª—è—Ä –≤ `docker-compose.yml`:

```
services:
  db:
    # https://hub.docker.com/_/postgres/
    image: postgres:9.6
    restart: always
    volumes:
      ‚Äî ./pgdata:/var/lib/postgresql/data/pgdata
    ports:
      ‚Äî ‚Äò5432:5432‚Äô
    environment:
      POSTGRES_PASSWORD: 'password'
      POSTGRES_DB: your_database
      PGDATA: /var/lib/postgresql/data/pgdata
```

–ó–∞—Ç–µ–º –≤ –Ω–∞—à–µ–º API —Å–µ—Ä–≤–∏—Å–µ –º—ã —É–∫–∞–∂–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `postgres`:

```
services:
  api:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: my_api_module
    volumes:
      - '.:/src/app'
      - /src/app/node_modules
    ports:
      - '8080:8080'
    links:
      - db
    depends_on:
      - db
    environment:
      NODE_ENV: 'development'
      DATABASE_URL: 'postgres://postgres:password@db/your_database'
```

## –í –∑–∞–∫–ª—é—á–µ–Ω–∏–µ‚Ä¶

–ù–∞–¥–µ—é—Å—å, —ç—Ç–∏ —Å–æ–≤–µ—Ç—ã –ø—Ä–∏–≥–æ–¥—è—Ç—Å—è –≤–∞–º –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –¥–æ–∫–µ—Ä-–æ–±—Ä–∞–∑–æ–≤. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å —Å–æ–≤–µ—Ç—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ—Ä–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç—å–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –∏—Ö –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∫ —Å—Ç–∞—Ç—å–µ ["Things I Wish I Knew About Docker Before I Started Using It"](https://twg.io/blog/things-i-wish-i-knew-about-docker-before-i-started-using-it/).

<hr>

–ï—Å–ª–∏ –≤–∞–º –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω —ç—Ç–æ—Ç –ø–µ—Ä–µ–≤–æ–¥, –ø–æ—Ö–ª–æ–ø–∞–π—Ç–µ –º–Ω–µ üëè, –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –º–µ–Ω—è –≤ –¥—Ä—É–∑—å—è [–≤ –ì–∏—Ç—Ö–∞–±–µ](https://github.com/sgromkov/) –∏ [–≤ –¢–≤–∏—Ç—Ç–µ—Ä–µ](https://twitter.com/GromkovSergey).

–ò –µ—Å–ª–∏ –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è, —á—Ç–æ —è –¥–µ–ª–∞—é, –ø–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –º–µ–Ω—è [–Ω–∞ –ü–∞—Ç—Ä–µ–æ–Ω–µ](https://www.patreon.com/sergey_gromkov) ‚ù§Ô∏è.

–°–æ–≤–µ—Ç—ã –∏ –∑–∞–º–µ—á–∞–Ω–∏—è –ø–æ –ø–µ—Ä–µ–≤–æ–¥—É —è –±—É–¥—É —Ä–∞–¥ –≤–∏–¥–µ—Ç—å –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –ø–æ–¥ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ–π.
